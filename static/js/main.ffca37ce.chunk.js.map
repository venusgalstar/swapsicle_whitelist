{"version":3,"sources":["config/index.js","App.js","reportWebVitals.js","index.js"],"names":["config","contractAbi","contractAddress","coinAddress","usdtAbi","console","log","App","useState","investAmount","setInvestAmount","tokenAmount","setTokenAmount","account","setAccount","coinDecimals","setCoinDecimals","calcValue","setCalcValue","web3","Web3","givenProvider","contract","eth","Contract","usdt","connectWallet","a","window","ethereum","enable","getAccounts","err","accounts","buy","alert","amount","utils","toBN","toWei","Number","toString","mul","Math","pow","div","sub","methods","approve","send","from","result","invest","gas","result1","useEffect","calcTokenAmount","getUserRewardAmount","call","value","fromWei","decimals","on","className","style","backgroundImage","width","height","cursor","right","top","onClick","border","borderRadius","background","paddingLeft","onChange","event","target","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ffca37ce.chunk.js","sourcesContent":["import abi from './InvestManagementAbi.json';\r\nimport usdtAbi from './UsdtAbi.json';\r\n\r\nvar config = {\r\n    contractAbi: abi,\r\n    contractAddress: \"0x49CFab8e81f068Dcf1c00Feb1740F619b2d29862\",\r\n    coinAddress: \"0xc7198437980c041c805A1EDcbA50c1Ce5db95118\",\r\n    usdtAbi: usdtAbi,\r\n\r\n};\r\n\r\nexport default config; ","\nimport './App.css';\nimport { useEffect, useState } from 'react';\nimport Web3 from 'web3';\n// var config  = require(\"./config/index\");\nimport config from \"./config\";\nimport { ToastContainer, toast } from 'react-toastify';\n\nconsole.log(\"config:\", config);\n\nfunction App() {\n  const [investAmount, setInvestAmount] = useState(0);\n  const [tokenAmount, setTokenAmount] = useState(0);\n  const [account, setAccount] = useState();\n  const [coinDecimals, setCoinDecimals] = useState(6);\n  const [calcValue, setCalcValue] = useState();\n\n  const web3 = new Web3(Web3.givenProvider);\n\n  const contract = new web3.eth.Contract(config.contractAbi, config.contractAddress);\n  const usdt = new web3.eth.Contract(config.usdtAbi, config.coinAddress);\n\n\n  const handleInvest = (event) => {\n    setInvestAmount(event.target.value);\n  }\n  const connectWallet = async () => {\n    await window.ethereum.enable();\n    web3.eth.getAccounts((err, accounts) => {\n      setAccount(accounts[0]);\n      console.log(\"account: \", accounts[0]);\n    })\n  }\n  const buy = async () => {\n    if (!account) {\n      alert(\"Please connect metamask and switch avalanche network.\");\n      return;\n    }\n    var amount = new web3.utils.toBN(web3.utils.toWei(Number(investAmount).toString(), 'ether'));\n    amount = amount.mul(new web3.utils.toBN(Math.pow(10, coinDecimals).toString()));\n    amount = amount.div(new web3.utils.toBN(Math.pow(10, 18).toString()));\n    amount = amount.sub(new web3.utils.toBN(calcValue[1]));\n\n    console.log(\"amount:\", amount.toString());\n    if (investAmount > 0 && tokenAmount == 0) {\n      alert(\"You already purchased!\");\n      return;\n    }\n\n    console.log(\"buy real amount:\", amount.toString());\n    var result = await usdt.methods.approve(config.contractAddress, amount).send({ from: account });\n    console.log(\"buy approve:\", result);\n    var result1 = await contract.methods.invest(0, 0, amount).send({ from: account, gas: 3000000 });\n    console.log(\"buy invest:\", result1);\n  }\n\n  useEffect(async () => {\n    if (!account) {\n      alert(\"Please connect metamask and switch avalanche network.\");\n      return;\n    }\n    calcTokenAmount();\n  }, [investAmount]);\n\n  useEffect(async () => {\n    calcTokenAmount();\n  }, [account]);\n\n  const calcTokenAmount = async () => {\n    var amount = new web3.utils.toBN(web3.utils.toWei(Number(investAmount).toString(), 'ether'));\n    amount = amount.mul(new web3.utils.toBN(Math.pow(10, coinDecimals).toString()));\n    amount = amount.div(new web3.utils.toBN(Math.pow(10, 18).toString()));\n    try {\n      var value = await contract.methods.getUserRewardAmount(0, 0, amount, account).call();\n      var tokenAmount = web3.utils.fromWei(value[0], 'ether');\n      setTokenAmount(tokenAmount);\n      setCalcValue(value);\n    } catch(e) {\n      console.log(\"error: \", e);\n      setCalcValue([0,amount])\n    }\n    \n\n  }\n\n  useEffect(async () => {\n    setCoinDecimals(await usdt.methods.decimals().call());\n  }, []);\n\n  window.ethereum.on('accountsChanged', function (accounts) {\n    console.log(\"account changed: \", accounts[0]);\n    setAccount(accounts[0]);\n  })\n\n  return (\n    <>\n      <ToastContainer>\n      </ToastContainer>\n      <div className=\"App pos-rel\" style={{ backgroundImage: 'url(./img/bg.png)', width: \"1917px\", height: \"937px\" }}>\n        {\n          account ?\n            <div className='pos-abs cursor-pointer' style={{ cursor: \"pointer\", backgroundImage: \"url(./img/btn_buy.png)\", width: \"491px\", height: \"74px\", right: \"415px\", top: \"500px\" }} onClick={buy}></div> :\n            <div className='pos-abs cursor-pointer' style={{ cursor: \"pointer\", backgroundImage: \"url(./img/btn_connect.png)\", width: \"491px\", height: \"74px\", right: \"415px\", top: \"500px\" }} onClick={connectWallet}></div>\n        }\n        <input className='pos-abs c-w fs-22' style={{ border: \"1px solid gray\", borderRadius: \"5px\", background: \"#131928\", height: \"60px\", right: \"685px\", top: \"174px\", paddingLeft: \"20px\", width: \"200px\" }} value={investAmount} onChange={handleInvest} />\n        <input className='pos-abs c-w fs-22' style={{ border: \"1px solid gray\", borderRadius: \"5px\", background: \"#131928\", height: \"60px\", right: \"420px\", top: \"174px\", paddingLeft: \"20px\", width: \"200px\" }} value={tokenAmount} onChange={() => { }} />\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}